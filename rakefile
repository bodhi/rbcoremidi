desc "Build the extension"
task :build do
  Dir.chdir('ext/') do
    sh "ruby extconf.rb"
    sh "make"
    mv "rbcoremidi.bundle", "../lib/coremidi/"
  end
end

desc "Clean build products"
task :clean do
  Dir.chdir('ext/') do
    rm_f "Makefile"
    rm_f "rbcoremidi.o"
  end
end

desc "Run all specs"
task :spec do
  Dir['spec/*.rb'].reject {|f| f == 'spec/spec_helper.rb'}.each do |spec|
    load spec
  end
end

task :default => :spec
